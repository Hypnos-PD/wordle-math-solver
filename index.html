<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wordle 数学等式筛选器</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🔢 Wordle 数学等式筛选器</h1>
            <p class="subtitle">基于颜色反馈智能筛选候选等式</p>
        </header>

        <!-- 控制区 -->
        <section class="controls">
            <div class="control-group">
                <label for="length">长度：</label>
                <input type="number" id="length" min="5" max="20" value="12" />
            </div>
            <div class="control-group">
                <label for="maxResults">最大结果：</label>
                <input type="number" id="maxResults" min="1" max="1000" value="200" />
            </div>
            <div class="control-group">
                <label for="timeout">超时(ms)：</label>
                <input type="number" id="timeout" min="500" max="10000" value="2000" step="500" />
            </div>
            <div class="control-group checkbox-group">
                <label>
                    <input type="checkbox" id="mode4" />
                    4 式模式
                </label>
            </div>
        </section>

        <!-- 输入区 -->
        <section class="input-section">
            <h2>输入猜测</h2>
            <div id="mainInputContainer" class="input-container">
                <!-- 动态生成输入格子 -->
            </div>
            
            <!-- 4式模式的颜色网格 -->
            <div id="colorGridsContainer" class="color-grids-container" style="display: none;">
                <div class="color-grid" data-grid="0">
                    <label>目标 1：</label>
                    <div class="grid-cells"></div>
                </div>
                <div class="color-grid" data-grid="1">
                    <label>目标 2：</label>
                    <div class="grid-cells"></div>
                </div>
                <div class="color-grid" data-grid="2">
                    <label>目标 3：</label>
                    <div class="grid-cells"></div>
                </div>
                <div class="color-grid" data-grid="3">
                    <label>目标 4：</label>
                    <div class="grid-cells"></div>
                </div>
            </div>

            <div class="action-buttons">
                <button id="addGuess" class="btn btn-primary">添加当前猜测</button>
                <button id="clearCurrent" class="btn btn-secondary">清空输入</button>
            </div>
        </section>

        <!-- 历史记录 -->
        <section class="history-section">
            <h2>猜测历史</h2>
            <div id="historyList" class="history-list">
                <p class="empty-hint">暂无猜测记录</p>
            </div>
            <button id="clearHistory" class="btn btn-secondary">清空历史</button>
        </section>

        <!-- 搜索控制 -->
        <section class="search-section">
            <div class="action-buttons">
                <button id="startSearch" class="btn btn-primary btn-large">🔍 开始搜索候选</button>
                <button id="cancelSearch" class="btn btn-danger" style="display: none;">取消搜索</button>
            </div>
            <div id="statusBar" class="status-bar"></div>
        </section>

        <!-- 结果展示 -->
        <section class="results-section">
            <h2>候选结果</h2>
            <div id="resultsContainer" class="results-container">
                <p class="empty-hint">点击"开始搜索候选"查看结果</p>
            </div>
        </section>

        <!-- 导入导出 -->
        <section class="import-export-section">
            <div class="action-buttons">
                <button id="exportState" class="btn btn-secondary">📤 导出状态</button>
                <button id="importState" class="btn btn-secondary">📥 导入状态</button>
            </div>
        </section>

        <!-- 帮助区 -->
        <section class="help-section">
            <details>
                <summary>📖 使用说明</summary>
                <div class="help-content">
                    <h3>颜色语义</h3>
                    <ul>
                        <li><span class="color-demo state-g">绿</span>：字符在该位置正确</li>
                        <li><span class="color-demo state-y">黄</span>：字符存在但位置错误</li>
                        <li><span class="color-demo state-x">灰</span>：字符不存在，或出现次数已达上限</li>
                    </ul>
                    <h3>操作说明</h3>
                    <ul>
                        <li>点击格子循环颜色：灰 → 黄 → 绿 → 灰</li>
                        <li>右键点击逆序循环：绿 → 黄 → 灰 → 绿</li>
                        <li>默认所有格子为灰色（未确认字符）</li>
                        <li>输入字符限定：0-9 + - * / =</li>
                        <li>等式规则：一个等号（不在首末），右侧仅数字或负数</li>
                    </ul>
                    <h3>4 式模式</h3>
                    <ul>
                        <li>在主输入区输入字符</li>
                        <li>在下方 4 行颜色格分别标记各目标的反馈</li>
                        <li>搜索时会为每个目标独立生成候选</li>
                    </ul>
                </div>
            </details>
        </section>
    </div>

    <script src="solver.js"></script>
    <script src="app.js"></script>
</body>
</html>
